<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <meta name="robots" content="index, follow">
    <title>Green FC    </title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
          integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <link href="css/New.css" rel="stylesheet" />
    <!--<link href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css" rel="stylesheet" />-->

    <link href="https://cdn.datatables.net/v/dt/dt-1.13.5/r-2.5.0/datatables.min.css" rel="stylesheet" />
</head>

<body>
    <!-- Header-->
    <header class="bg-dark py-5  border-bottom mb-4">
        <div class="container " style="    padding-bottom: 12px;">
            <div class="text-center text-white ">
                <h1 class="display-4 fw-bolder text"
                    style="animation: 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0s 1 normal both running text-pop-up-top;">
                   Green Fc   Records
                </h1>

                <!-- <p class="lead fw-normal text-white-50 mb-0">With this shop hompeage template</p> -->
            </div>
        </div>
    </header>


    <div class="container">
        <div class="col-md-12 mt-3 mb-2">
            <h1>Send Us A Message:</h1>
            <!-- <form  action="https://formsubmit.co/romarioarnat15@gmail.com " method="POST">
        <div class="row">


            <div class="col-md-12">
                <div class="row form-group">



                    <div class="col-md-6 form-group">
                        <input type="text" name="name" class="form-control" placeholder="Full Name"
                            required>
                    </div>
                    <div class="col-md-6">
                        <input type="email" name="email" class="form-control" placeholder="Email Address"
                            required>
                    </div>

                </div>
            </div>
            <div class="col-md-12">
                <div class="form-group">
                    <textarea placeholder="Your Message" class="form-control" name="message" rows="5"
                        required></textarea>
                </div>
            </div>

            <div class="col-md-12">
                <button type="submit" class="btn btn-lg btn-dark btn-block">Submit Form</button>
            </div>

        </div>
    </form> -->

            <form action="https://formsubmit.co/romarioarnat15@gmail.com " method="POST"
                  enctype="multipart/form-data">
                <div class="row">


                    <div class="col-md-12">
                        <div class="row form-group">



                            <div class="col-md-6 form-group">
                                <H6>Team Name(s)</H6>
                                <span>Seperated with a comma</span>
                                <input type="text" name="Team Name" class="form-control" placeholder="Team Name(s)"
                                       required>
                            </div>
                            <div class="col-md-6 form-group">
                                <H6>Phone Number</H6>
                                <span style="visibility:hidden">Seperated with a comma</span>
                                <input type="number" name="Phone Number" class="form-control"
                                       placeholder="Phone Number" required>
                            </div>
                            <div class="col-md-6 form-group">
                                <H6>Attach Prove of payment</H6>
                                <span style="visibility:hidden">Seperated with a comma</span>
                                <input type="file" accept="image/*" name="Image" class="form-control" required>
                            </div>
                        </div>
                    </div>
                    <!--<div class="col-md-12">
                <div class="form-group">
                    <textarea placeholder="Your Message" class="form-control" name="message" rows="5"
                              required></textarea>
                </div>
            </div>-->

                    <div class="col-md-12">
                        <button type="submit" class="btn btn-lg btn-dark btn-block buttonBg ">Submit Form</button>
                    </div>

                </div>
            </form>

        </div>
    </div>





    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container">
            <div class="row">

                <div class="col-md-12">
                    <p class="m-0 text-center text-white">Copyright &copy; Your Website 2022</p>


                </div>



            </div>



        </div>

    </footer>
    <!-- Bootstrap core JS-->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
            crossorigin="anonymous"></script>

    <!--<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>-->

    <script src="https://cdn.datatables.net/v/dt/dt-1.13.5/r-2.5.0/datatables.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-analytics.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-firestore.js"></script>




    <script>

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyD2lun6Fle6g_No3vd50Ser6lp4l7yxxXw",
            authDomain: "movieapp-d4e7b.firebaseapp.com",
            databaseURL: "https://movieapp-d4e7b-default-rtdb.firebaseio.com",
            projectId: "movieapp-d4e7b",
            storageBucket: "movieapp-d4e7b.appspot.com",
            messagingSenderId: "456049902625",
            appId: "1:456049902625:web:7f7cfe094ac660d5230f60",
            measurementId: "G-BKTH5DMHGB"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();



        if (firebase.auth().currentUser) {
            db.collection("Birthday").doc(firebase.auth().currentUser.uid).get()
                .then(document => {
                    console.log(document.data());
                })
                .catch(error => console.error(error));
        }
        else {

            console.log("damn nigga ")
        }

        var Id = "";

        // this works
        const booksRef = firebase.firestore().collection("Birthday");
        booksRef.get().then((snapshot) => {
            const data = snapshot.docs.map((doc) => ({
                id: doc.id,
                ...doc.data()
            }));

            $('#example').DataTable({
                data: data,
                "aoColumnDefs": [{ "bVisible": false, "aTargets": [0] }],
                columns: [
                    //hide the second & fourth column
                    // { 'visible': false, 'targets': [0] },
                    { data: 'id' },
                    { data: 'name' },
                    { data: 'date' },
                    {
                        data: null,
                        render: function (data, type, row) {
                            return '<button class="btn btn-warning action-button" data-id="' + data.id + '">Edit</button>';
                        }
                    },
                    {
                        data: null,
                        render: function (data, type, row) {
                            return '<button class="btn btn-danger delete-button" data-id="' + data.id + '">Delete</button>';
                        }
                    }

                ]
            });
        });
        const loader = document.getElementById("spinner");

        // Handle button click event
        $('#example').on('click', '.action-button', function () {
            var id1 = $(this).data('id');


            Id = id1;
            console.log("isja",)
            const booksss = firebase.firestore().collection("Birthday");
            booksss.get().then((snapshot) => {

                const data = snapshot.docs.map((doc) => ({
                    id: doc.id,

                    ...doc.data()

                }));
                const specificDoc = data.find((doc) => doc.id === id1);

                if (specificDoc) {


                    const name = specificDoc.name;
                    const date = specificDoc.date;

                    $('#modalName').val(specificDoc.name);




                    const dateParts = date.split("-");
                    const formattedDateq = dateParts[2] + "-" + dateParts[1] + "-" + dateParts[0];


                    console.log("fierst run ", formattedDateq)



                    console.log("string f", date.split('-'))
                    const dateArray = date.split('-');
                    const displayArray = dateArray.slice(0, 3);

                    console.log("displayArray ", displayArray);


                    const year = displayArray[0];
                    const month = displayArray[1];
                    const day = displayArray[2];

                    const formattedDate = year + "-" + month + "-" + day;
                    $('#modalDate').val(formattedDateq);

                } else {
                    console.log("No such document!");
                }



            });

            $('#EditModal').modal('show');


        });

        const editForm = document.getElementById("editForm"); // Replace "bookForm" with your form ID

        editForm.addEventListener("submit", (event) => {
            $('#formEditBtn').button('loading');
            // loader.style.display = "block";

            document.getElementById("editloaderBtn").style.display = "block";
            document.getElementById("formEditBtn").style.display = "none";
            event.preventDefault();

            console.log("it should hide")
            console.log("in the eduit form")

            const booksRefsDD = firebase.firestore().collection("Birthday");
            booksRefsDD.get().then((snapshot) => {
                const data = snapshot.docs.map((doc) => ({
                    id: doc.id,
                    ...doc.data(),
                }));

                // Assuming you have retrieved the specific document you want to update
                const specificDoc = data.find((doc) => doc.id === Id);

                if (specificDoc) {
                    // Perform the necessary updates on specificDoc
                    var name1 = document.getElementById("modalName").value;
                    var date2 = document.getElementById("modalDate").value;

                    const dateParts = date2.split("-");
                    const formattedDateq = dateParts[2] + "-" + dateParts[1] + "-" + dateParts[0];


                    console.log("date before submit ", formattedDateq)
                    // Update the document in Firestore
                    booksRef
                        .doc(specificDoc.id)
                        .update({
                            name: name1,
                            date: formattedDateq,

                        })
                        .then(() => {
                            console.log("Document successfully updated!");

                            $('#EditModal').modal('hide');

                            window.location.reload();
                        })
                        .catch((error) => {
                            console.error("Error updating document: ", error);

                            $('#ErrorModal').modal('show');
                        });
                } else {
                    console.log("No such document!");
                    $('#ErrorModal').modal('show');
                }
            });


        });


    </script>
    <script src="./JS/delete.js"></script>
    <script src="./JS/add.js"></script>

</body>

</html>